<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>500ã‚­ãƒ«ãƒãƒ£ãƒ¬ãƒ³ã‚¸äºˆæƒ³é›†è¨ˆ</title>
  <link rel="stylesheet" href="style.css" />
  <script defer>
    let predictions = [];

    function addPrediction() {
      const name = document.getElementById("predictorName").value.trim();
      const predicted = parseInt(document.getElementById("predictedMatches").value);

      if (!name || isNaN(predicted) || predicted <= 0) {
        alert("ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã¨äºˆæƒ³è©¦åˆæ•°ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ã­ï¼");
        return;
      }

      predictions.push({ name, predicted });
      updatePredictionList();

      document.getElementById("predictorName").value = "";
      document.getElementById("predictedMatches").value = "";
    }

    function updatePredictionList() {
      const listDiv = document.getElementById("predictionList");
      if (predictions.length === 0) {
        listDiv.innerHTML = "ğŸ§  ç™»éŒ²ã•ã‚ŒãŸäºˆæƒ³ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚";
        return;
      }

      let html = "<ul>";
      for (const p of predictions) {
        html += `<li>${p.name}ã•ã‚“ ${p.predicted}è©¦åˆã§äºˆæƒ³ï¼</li>`;
      }
      html += "</ul>";
      listDiv.innerHTML = html;
    }

    function showTopPredictions() {
      const actual = parseInt(document.getElementById("actualResult").value);
      if (isNaN(actual) || actual <= 0) {
        alert("å®Ÿéš›ã®é”æˆè©¦åˆæ•°ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ã­ï¼");
        return;
      }

      const sorted = predictions
        .map((p) => ({
          name: p.name,
          predicted: p.predicted,
          diff: Math.abs(p.predicted - actual),
        }))
        .sort((a, b) => a.diff - b.diff)
        .slice(0, 10);

      const listDiv = document.getElementById("topResult");

      if (sorted.length === 0) {
        listDiv.innerHTML = "ğŸ” è¡¨ç¤ºã™ã‚‹äºˆæƒ³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚";
        return;
      }

      const namesList = sorted.map((p) => `${p.name}ã•ã‚“`).join("ã€");
      listDiv.innerHTML = `ğŸ‰ èª¤å·®ãŒå°‘ãªã‹ã£ãŸä¸Šä½10äººï¼š<br><strong>${namesList}</strong>`;
    }
  </script>
</head>
<body>
  <h2>ğŸ® 500ã‚­ãƒ«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ğŸ“Š</h2>

  <h3>ğŸ“ è¦–è´è€…äºˆæƒ³ç™»éŒ²</h3>
  <input type="text" id="predictorName" placeholder="ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ " />
  <input type="number" id="predictedMatches" placeholder="ä½•è©¦åˆã§é”æˆäºˆæƒ³ï¼Ÿ" />
  <button onclick="addPrediction()">äºˆæƒ³ã‚’ç™»éŒ²</button>

  <div class="predictor-list" id="predictionList">
    ğŸ§  ç™»éŒ²ã•ã‚ŒãŸäºˆæƒ³ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚
  </div>

  <hr />

  <h3>ğŸ† çµæœç™ºè¡¨</h3>
  <input type="number" id="actualResult" placeholder="å®Ÿéš›ã®é”æˆè©¦åˆæ•°" />
  <button onclick="showTopPredictions()">çµæœã‚’è¡¨ç¤º</button>

  <div class="predictor-list" id="topResult">
    ğŸ” ä¸Šä½10ä½ä»¥å†…ã®äºˆæƒ³ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
  </div>
</body>
</html>
